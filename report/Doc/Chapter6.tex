\chapter{Instructions for installation and execution}

This chapter provides instructions for installing, configuring, and executing the 
Certificate Authority. These instructions are designed to enable readers to successfully 
deploy and test the system in their own environments.

\section{Software Prerequisites}

The following software must be installed on the target system:

\textbf{Required Software:}
\begin{itemize}
    \item \textbf{Operating System}: Linux, macOS, or Windows with WSL2 (tested on Linux)
    \item \textbf{Docker}: Version 28.0 or higher (tested with 28.3)
    \item \textbf{Docker Compose}: Version 2.37 or higher (tested with 2.37.3)
    \item \textbf{Git}: Version 2
\end{itemize}

\section{Installation process}

\subsection{Environment Setup}
\begin{verbatim}
# Verify Docker and Docker Compose are installed
$ docker --version
Docker version 28.3.0, build 38b7060a21

$ docker compose version
Docker Compose version 2.37.3

# Clone the repository 
$ git clone https://github.com/ecivini/advanced-programming-of-cryptographic-methods.git

# Move to the project directory
$ cd advanced-programming-of-cryptographic-methods
\end{verbatim}

\subsection{Configuration}

Create a \texttt{.env} file in the project root directory with the following configuration:
{\color{red}TODO: Add resend api for shared email address account}
\begin{verbatim}
# MongoDB Configuration
MONGO_USERNAME=camanager
MONGO_PASSWORD=912k83hb0slW)s2

# AWS/HSM Configuration
AWS_REGION=eu-west-1
AWS_ACCESS_KEY_ID=111122223333
AWS_SECRET_ACCESS_KEY=aaaabbbb11111

# Email Service Configuration (Resend.com)
RESEND_API_KEY=your_resend_api_key_here
RESEND_FROM=onboarding@resend.dev
\end{verbatim}
As the CA is using an emulated version of AWS KMS, the 
\texttt{AWS\_ACCESS\_KEY\_ID} and \texttt{AWS\_SECRET\_ACCESS\_KEY} can be set to the proposed 
test values which emulates real ones. In addition, as the free plan of Resend.com allows sending 
emails only to a single email address, and there are no free domain providers, RESEND\_FROM must be 
set to the default email address provided by Resend.com.

\subsection{Starting the CA}

\textbf{Initial Startup:}
\begin{verbatim}
# Build and start all services
docker compose up --build
\end{verbatim}
During the first startup, the system automatically:
\begin{enumerate}
    \item Creates a new root ECDSA key pair in the HSM using curve P256
    \item Generates the root certificate for the CA
    \item Initializes the database schema
    \item Sets up necessary indexes
\end{enumerate}
After that, and in any execution, the system will start the following services:
\begin{itemize}
    \item \textbf{MongoDB}: Database on port 27017
    \item \textbf{Local KMS}: HSM on port 8080
    \item \textbf{Backend}: CA server on port 5000
    \item \textbf{Frontend}: Web interface on port 3000
\end{itemize}

\subsection{Service Verification}

\textbf{Health Check Endpoints:}
\begin{verbatim}
# Backend health check
curl http://localhost:5000/v1/health

# Frontend accessibility
curl http://localhost:3000
\end{verbatim}
